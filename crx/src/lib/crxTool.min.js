!function(e){"function"==typeof define&&define.amd?define(e):crxTool=e()}(function(){if(chrome){var e=this,n=e.crxTool,r={isArray:function(e){return Array&&Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},hasKey:function(e,n){return null!==e&&hasOwnProperty.call(e,n)},each:function(e,n){var t=e.length,a=0;if(r.isArray(e))for(;t>a&&!1!==n.call(e[a],e[a],a);a++);else for(a in e)if(r.hasKey(e,a)&&!1===n.call(e[a],a+1,e[a]))break}},t={send:function(e,n,r){chrome.tabs.query({active:!0},function(t){chrome.tabs.sendMessage(t[0].id,{tag:e,data:n},function(e){r&&r(e)})})},sendListen:function(e,n){chrome.runtime.onMessage.addListener(function(r,t,a){r.tag==e&&n&&n(r.data,t,a)})}},a={getScripts:function(){return document.getElementsByTagName("script")},getPageScripts:function(){var e=[];return r.each(a.getScripts(),function(n,r){""===r.src&&e.push(r.innerHTML.replace(/\/\/[\S]*/g,"").replace(/[}][\s]/g,"};").replace(/var\s/g,"var#").replace(/\s+/g,"").replace(/var#/g,"var "))}),e},getPageValue:function(e){var n=null,r=a.getPageScripts().join(""),t=r.indexOf(e+"=");if(-1==t)return n;var i=r.indexOf(";",t);if(t+e.length+1>=i)return n;var c=r.slice(t+e.length+1,i);try{n=new Function("return "+c+";")()}catch(o){}return n}},i={send:t.send,sendListen:t.sendListen,getPageValue:a.getPageValue,noConflict:function(){return e.crxTool=n,this}};return i}});